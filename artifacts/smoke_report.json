{
  "timestamp": "2026-01-30T15:43:52.812011",
  "repo_root": "C:\\Users\\sydne\\OneDrive\\Desktop\\MPX3",
  "db_path": "C:\\Users\\sydne\\OneDrive\\Desktop\\MPX3\\data\\db\\gold.db",
  "db_exists": true,
  "git": {
    "commit": "0de89a459a086bcbd5800d2bb31e97c9037ba75b",
    "branch": "feature/ui-redesign-conveyor-belt"
  },
  "summary": {
    "total_checks": 5,
    "passed": 5,
    "failed": 0,
    "critical_failures": 0,
    "total_duration_sec": 9.87,
    "overall_passed": true
  },
  "db_counts": {
    "validated_setups": 30,
    "daily_features": 762,
    "bars_1m": 724672
  },
  "checks": [
    {
      "name": "app_sync",
      "description": "Config and database synchronization",
      "passed": true,
      "duration_sec": 3.78,
      "exit_code": 0,
      "output": "======================================================================\nTESTING APP SYNCHRONIZATION\n======================================================================\n\nTEST 1: Config.py matches validated_setups database\n----------------------------------------------------------------------\n[PASS] Found 9 setups in database\n   - MGC: 9 setups\n   - NQ: 0 setups\n   - MPL: 0 setups\n\n=== Testing MGC ===\n[PASS] MGC config matches database perfectly\n\n=== Testing NQ ===\n[WARN]  No NQ setups in database (expected if not using NQ)\n\n=== Testing MPL ===\n[WARN]  No MPL setups in database (expected if not using MPL)\n\nTEST 2: SetupDetector loads from database\n----------------------------------------------------------------------\n[PASS] SetupDetector successfully loaded 11 MGC setups\n\nTEST 3: Data loader filter checking\n----------------------------------------------------------------------\n[PASS] ORB size filters ENABLED\n   MGC filters: {'0900': [None, None, None, None], '1000': [None, None, None], '1100': [0.15, 0.15]}\n\nTEST 4: Strategy engine config loading\n----------------------------------------------------------------------\n[PASS] StrategyEngine has 3 MGC ORB configs\n\nTEST 5: ExecutionSpec system (UPDATE14)\n----------------------------------------------------------------------\n\n======================================================================\nEXECUTION SPEC VERIFICATION (UPDATE14 Step 5)\n======================================================================\nProject root: C:\\Users\\sydne\\OneDrive\\Desktop\\MPX3\n\n======================================================================\nTEST 1: ExecutionSpec Creation\n======================================================================\n[PASS] Created valid spec: 9292fc83174a\n[PASS] Caught invalid orb_time: orb_time must be 4 digits (e.g., '0900', '1000'), got: 999\n[PASS] Caught incompatible combo: entry_rule='5m_close_outside' requires confirm_tf='5m', got confirm_tf='1m'\n\n======================================================================\nTEST 2: Serialization & Hashing\n======================================================================\n[PASS] Hash matches after serialization: 9292fc83174a\n[PASS] Specs with different RR are compatible\n[PASS] Specs with different entry_rule are not compatible\n\n======================================================================\nTEST 3: Contract Validation\n======================================================================\n[PASS] Contract validation passed for valid spec\n[PASS] Caught unknown entry_rule: Unknown entry_rule: nonexistent_rule. Available: limit_at_orb, 1st_close_outside, 2nd_close_outside, 5m_close_outside\n\n======================================================================\nTEST 4: Entry Rule Implementations\n======================================================================\n[PASS] limit_at_orb: LONG @ 100.60\n[PASS] 1st_close_outside: LONG @ 100.70\n[PASS] 5m_close_outside: LONG @ 101.00\n\n======================================================================\nTEST 5: Universal Invariants\n======================================================================\n[PASS] Invariant: entry_timestamp > orb_end\n[PASS] Invariant: no lookahead (entry >= confirm)\n[PASS] Invariant: ORB window complete (5 bars)\n[PASS] Invariant: limit entry <= tradeable entry (longs)\n\n======================================================================\nTEST 6: Pre-defined Presets\n======================================================================\n[PASS] Loaded preset: MGC 1000 ORB, tradeable entry (1st close outside)\n[PASS] Caught unknown preset: \"Preset 'nonexistent' not found. Available presets: mgc_1000_tradeable, mgc_1000_limit, mgc_1000_5m_close\"\n\n======================================================================\nSUMMARY\n======================================================================\n[PASS]: Spec Creation\n[PASS]: Serialization\n[PASS]: Contracts\n[PASS]: Entry Rules\n[PASS]: Invariants\n[PASS]: Presets\n\nPassed: 6/6\n\n[PASS] ALL TESTS PASSED - Execution specs verified!\n\n[PASS] ExecutionSpec checks passed\n\n======================================================================\nTest 6: Verify realized_rr usage (not r_multiple)\n======================================================================\nRunning: scripts/check/check_realized_rr_usage.py\n\n======================================================================\nREALIZED_RR USAGE CHECK - Step 3 Verification\n======================================================================\n\nChecking critical files (must use realized_rr for decisions/scoring):\n\n  [OK] trading_app/edge_utils.py\n  [OK] trading_app/setup_detector.py\n  [OK] trading_app/strategy_engine.py\n  [OK] trading_app/auto_search_engine.py\n  [OK] trading_app/experimental_scanner.py\n  [OK] trading_app/app_canonical.py\n\nChecking allowed files (can use r_multiple for raw data/schema):\n\n  [ALLOWED] tests/conftest.py (raw data/schema usage OK)\n  [ALLOWED] tests/test_build_daily_features.py (raw data/schema usage OK)\n  [ALLOWED] strategies/execution_engine.py (raw data/schema usage OK)\n  [ALLOWED] trading_app/edge_tracker.py (raw data/schema usage OK)\n  [ALLOWED] discover_all_orb_patterns.py (raw data/schema usage OK)\n  [ALLOWED] analysis/research_night_orb_comprehensive.py (raw data/schema usage OK)\n\n======================================================================\nCOVERAGE SUMMARY\n======================================================================\n\nTotal files scanned: 12/12\n\nFiles scanned:\n\n  Critical files (must use realized_rr for decisions):\n    - trading_app/edge_utils.py (2 r_multiple occurrences)\n    - trading_app/setup_detector.py (0 r_multiple occurrences)\n    - trading_app/strategy_engine.py (0 r_multiple occurrences)\n    - trading_app/auto_search_engine.py (0 r_multiple occurrences)\n    - trading_app/experimental_scanner.py (0 r_multiple occurrences)\n    - trading_app/app_canonical.py (0 r_multiple occurrences)\n\n  Allowed files (can use r_multiple for raw data/schema):\n    - tests/conftest.py (1 r_multiple occurrences)\n    - tests/test_build_daily_features.py (4 r_multiple occurrences)\n    - strategies/execution_engine.py (11 r_multiple occurrences)\n    - trading_app/edge_tracker.py (0 r_multiple occurrences)\n    - discover_all_orb_patterns.py (0 r_multiple occurrences)\n    - analysis/research_night_orb_comprehensive.py (0 r_multiple occurrences)\n\nr_multiple occurrences found: 18 total\n  - In critical files (blocked for decisions): 2\n  - In allowed files (OK for raw data/schema): 16\n\nContext breakdown:\n  - BLOCKED (decision/scoring): 0 violations\n  - ALLOWED (display-only/legacy): 16 occurrences\n\n======================================================================\n[OK] ALL CHECKS PASSED\n======================================================================\n\nSummary:\n  [OK] 6 critical files checked\n  [OK] 6 allowed files noted\n  [OK] No r_multiple usage in decision/scoring paths\n  [OK] All performance metrics use realized_rr\n\nREALIZED_RR USAGE IS CORRECT\n\n\n\n======================================================================\n[PASS] ALL TESTS PASSED!\n\nYour apps are now synchronized:\n  - config.py matches validated_setups database\n  - setup_detector.py works with all instruments\n  - data_loader.py filter checking works\n  - strategy_engine.py loads configs\n  - ExecutionSpec system verified (UPDATE14)\n  - realized_rr usage verified (Step 3 - AUDIT1 fixes)\n  - All components load without errors\n\n[PASS] Your apps are SAFE TO USE!\n",
      "error": ""
    },
    {
      "name": "realized_rr_usage",
      "description": "Realized RR usage verification",
      "passed": true,
      "duration_sec": 0.44,
      "exit_code": 0,
      "output": "======================================================================\nREALIZED_RR USAGE CHECK - Step 3 Verification\n======================================================================\n\nChecking critical files (must use realized_rr for decisions/scoring):\n\n  [OK] trading_app/edge_utils.py\n  [OK] trading_app/setup_detector.py\n  [OK] trading_app/strategy_engine.py\n  [OK] trading_app/auto_search_engine.py\n  [OK] trading_app/experimental_scanner.py\n  [OK] trading_app/app_canonical.py\n\nChecking allowed files (can use r_multiple for raw data/schema):\n\n  [ALLOWED] tests/conftest.py (raw data/schema usage OK)\n  [ALLOWED] tests/test_build_daily_features.py (raw data/schema usage OK)\n  [ALLOWED] strategies/execution_engine.py (raw data/schema usage OK)\n  [ALLOWED] trading_app/edge_tracker.py (raw data/schema usage OK)\n  [ALLOWED] discover_all_orb_patterns.py (raw data/schema usage OK)\n  [ALLOWED] analysis/research_night_orb_comprehensive.py (raw data/schema usage OK)\n\n======================================================================\nCOVERAGE SUMMARY\n======================================================================\n\nTotal files scanned: 12/12\n\nFiles scanned:\n\n  Critical files (must use realized_rr for decisions):\n    - trading_app/edge_utils.py (2 r_multiple occurrences)\n    - trading_app/setup_detector.py (0 r_multiple occurrences)\n    - trading_app/strategy_engine.py (0 r_multiple occurrences)\n    - trading_app/auto_search_engine.py (0 r_multiple occurrences)\n    - trading_app/experimental_scanner.py (0 r_multiple occurrences)\n    - trading_app/app_canonical.py (0 r_multiple occurrences)\n\n  Allowed files (can use r_multiple for raw data/schema):\n    - tests/conftest.py (1 r_multiple occurrences)\n    - tests/test_build_daily_features.py (4 r_multiple occurrences)\n    - strategies/execution_engine.py (11 r_multiple occurrences)\n    - trading_app/edge_tracker.py (0 r_multiple occurrences)\n    - discover_all_orb_patterns.py (0 r_multiple occurrences)\n    - analysis/research_night_orb_comprehensive.py (0 r_multiple occurrences)\n\nr_multiple occurrences found: 18 total\n  - In critical files (blocked for decisions): 2\n  - In allowed files (OK for raw data/schema): 16\n\nContext breakdown:\n  - BLOCKED (decision/scoring): 0 violations\n  - ALLOWED (display-only/legacy): 16 occurrences\n\n======================================================================\n[OK] ALL CHECKS PASSED\n======================================================================\n\nSummary:\n  [OK] 6 critical files checked\n  [OK] 6 allowed files noted\n  [OK] No r_multiple usage in decision/scoring paths\n  [OK] All performance metrics use realized_rr\n\nREALIZED_RR USAGE IS CORRECT\n\n",
      "error": ""
    },
    {
      "name": "execution_spec",
      "description": "ExecutionSpec system integrity",
      "passed": true,
      "duration_sec": 1.07,
      "exit_code": 0,
      "output": "\n======================================================================\nEXECUTION SPEC VERIFICATION (UPDATE14 Step 5)\n======================================================================\nProject root: C:\\Users\\sydne\\OneDrive\\Desktop\\MPX3\n\n======================================================================\nTEST 1: ExecutionSpec Creation\n======================================================================\n[PASS] Created valid spec: 9292fc83174a\n[PASS] Caught invalid orb_time: orb_time must be 4 digits (e.g., '0900', '1000'), got: 999\n[PASS] Caught incompatible combo: entry_rule='5m_close_outside' requires confirm_tf='5m', got confirm_tf='1m'\n\n======================================================================\nTEST 2: Serialization & Hashing\n======================================================================\n[PASS] Hash matches after serialization: 9292fc83174a\n[PASS] Specs with different RR are compatible\n[PASS] Specs with different entry_rule are not compatible\n\n======================================================================\nTEST 3: Contract Validation\n======================================================================\n[PASS] Contract validation passed for valid spec\n[PASS] Caught unknown entry_rule: Unknown entry_rule: nonexistent_rule. Available: limit_at_orb, 1st_close_outside, 2nd_close_outside, 5m_close_outside\n\n======================================================================\nTEST 4: Entry Rule Implementations\n======================================================================\n[PASS] limit_at_orb: LONG @ 100.60\n[PASS] 1st_close_outside: LONG @ 100.70\n[PASS] 5m_close_outside: LONG @ 101.00\n\n======================================================================\nTEST 5: Universal Invariants\n======================================================================\n[PASS] Invariant: entry_timestamp > orb_end\n[PASS] Invariant: no lookahead (entry >= confirm)\n[PASS] Invariant: ORB window complete (5 bars)\n[PASS] Invariant: limit entry <= tradeable entry (longs)\n\n======================================================================\nTEST 6: Pre-defined Presets\n======================================================================\n[PASS] Loaded preset: MGC 1000 ORB, tradeable entry (1st close outside)\n[PASS] Caught unknown preset: \"Preset 'nonexistent' not found. Available presets: mgc_1000_tradeable, mgc_1000_limit, mgc_1000_5m_close\"\n\n======================================================================\nSUMMARY\n======================================================================\n[PASS]: Spec Creation\n[PASS]: Serialization\n[PASS]: Contracts\n[PASS]: Entry Rules\n[PASS]: Invariants\n[PASS]: Presets\n\nPassed: 6/6\n\n[PASS] ALL TESTS PASSED - Execution specs verified!\n",
      "error": ""
    },
    {
      "name": "validation_queue",
      "description": "Validation queue integration",
      "passed": true,
      "duration_sec": 2.31,
      "exit_code": 0,
      "output": "\n================================================================================\nVALIDATION QUEUE INTEGRATION CHECK\n================================================================================\nDatabase: data/db/gold.db\n\nTest 1: validation_queue Table Exists\n--------------------------------------------------------------------------------\n  [OK] validation_queue exists with 14 columns\n  [OK] All required columns present\n\nTest 2: Insert Test Item into validation_queue\n--------------------------------------------------------------------------------\n  [OK] Test item inserted (queue_id=999998)\n\nTest 3: Query PENDING Items\n--------------------------------------------------------------------------------\n  [OK] Found 1 PENDING item(s)\n       MGC 0900 RR=1.5 (0.250R) - PENDING\n\nTest 4: Field Mapping to edge_registry\n--------------------------------------------------------------------------------\n  [OK] edge_registry has all required columns\n  [OK] Test mapping inserted successfully\n       edge_id: b409aabd-301a-43...\n       instrument: MGC, orb: 0900, rr: 1.5\n       status: IN_PROGRESS, created_by: AUTO_SEARCH\n  [OK] Test data cleaned up\n\n================================================================================\nSUCCESS: Validation queue integration verified!\n================================================================================\n\nIntegration is ready. You can now:\n  1. Run Auto Search (Research tab)\n  2. Send candidate to Validation Queue\n  3. Go to Validation tab\n  4. See candidate in 'Validation Queue (Auto Search)' section\n  5. Click 'Start Validation'\n  6. Candidate moves to edge_registry (IN_PROGRESS)\n  7. Continue validation in existing workflow\n\n\n",
      "error": ""
    },
    {
      "name": "auto_search_tables",
      "description": "Auto search table schemas",
      "passed": true,
      "duration_sec": 2.27,
      "exit_code": 0,
      "output": "\n================================================================================\nAUTO SEARCH TABLES CHECK\n================================================================================\nDatabase: data/db/gold.db\n\nTest 1: Tables Exist\n--------------------------------------------------------------------------------\n  [OK] search_runs: 10 columns, 14 rows\n  [OK] search_candidates: 16 columns, 10 rows\n  [OK] search_memory: 10 columns, 7 rows\n  [OK] validation_queue: 14 columns, 0 rows\n\nTest 2: Insert + Select Sanity Check\n--------------------------------------------------------------------------------\n  [OK] search_runs: Insert/select works\n\nTest 3: Hash Determinism\n--------------------------------------------------------------------------------\n  [OK] Hash determinism: 1c9bfc470eacd2e8 == 1c9bfc470eacd2e8\n  [OK] Different params produce different hash: 1c9bfc470eacd2e8 != b63da4d63e40b654\n\nTest 4: Memory Skip Logic\n--------------------------------------------------------------------------------\n  [OK] Memory insert works: hash test_hash_abc123 found\n  [OK] Memory skip logic: hash found, would skip re-testing\n\n================================================================================\nSUCCESS: All auto search table checks passed!\n================================================================================\n\nTables are ready for use. You can now:\n  1. Run Auto Search from Streamlit app (Research tab)\n  2. Check search_runs table for execution history\n  3. Check search_candidates for discovered edges\n  4. Check search_memory to see tested param space\n\n\n",
      "error": ""
    }
  ]
}